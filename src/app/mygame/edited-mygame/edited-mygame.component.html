<modal-buywhere></modal-buywhere>
<modal-tag></modal-tag>

<section id="editedmygame" *ngIf="selectedMyGame" [ngStyle]="{'--userColor': this.app.userConnected?.themeColor || this.app.colorDefault }">

<form #editedMyGame="ngForm" (ngSubmit)="updateMyGame(editedMyGame)">

  <section id="headeEditMyGame" class="container">

    <div id="head-img">
      <div class="banner-image pp-shadow">
        <div class="banner" style="background-image: url({{ selectedMyGame.myGame?.game?.image?.thumb_url}});"></div>
        <div class="blur"></div>
        <img class="back" src="{{ selectedMyGame.myGame?.game?.image?.thumb_url }}" alt="blur">
      </div>
      <div class="separe-image"></div>
      <div class="screen-image">
        <small>Image Utilisateur</small>
        <div class="screen-all">
          <ng-container *ngFor="let oneScreen of [].constructor(10)"> <!-- this.app.viewMyGame.screenshot-->
            <div class="screen-encard">
              <img class="screen" [src]="selectedMyGame.myGame?.game?.image?.thumb_url" alt="userImage">
            </div>
          </ng-container>
        </div>
      </div>
    </div>

    <div id="head-modal">

      <div>
        <h2 class="titleGame">{{ selectedMyGame.myGame?.game?.name }}</h2>
        <small>Ajouté le {{ selectedMyGame.myGame?.added_at | date:'dd / MM / yyyy' }}</small>
      </div>


      <button type="submit" class="main-gamenium-btn">Sauvegardé <i class="ri-save-3-fill"></i></button>

    </div>

  </section>

  <ng-container *ngIf="selectedMyGame.myGame">
  <div id="startFormEditedMyGame">

    <section id="editedHistoryMyGame" class="container">

      <input type="hidden" [(ngModel)]="selectedMyGame.myGame.id" name="myGameId">

      <!-- EPINGLER -->
      <div class="panel">

        <div class="head-panel">
          <h2><i class="ri-pushpin-fill"></i>Épinglé</h2>
        </div>

        <select id="is_pinned" name="is_pinned" [(ngModel)]="selectedMyGame.myGame.is_pinned">
          <option [value]="true">Épinglé</option>
          <option [value]="false">Non épinglé</option>
        </select>

      </div>

      <!-- LISTE DE SOUHAIT-->
      <div class="panel" style="display: none">

        <div class="head-panel">
          <h2><i class="ri-hand-heart-fill"></i>List de souhaite</h2>
        </div>

        <select id="wish_list" name="wish_list" [(ngModel)]="selectedMyGame.myGame.wish_list">
          <option [value]="true">Oui</option>
          <option [value]="false">Non</option>
        </select>

      </div>

      <div class="panel">

        <div class="head-panel">
          <h2><i class="ri-medal-fill"></i>Evaluation</h2>
        </div>

        <ng-container *ngIf="selectedMyGame.rate">
          <input type="hidden" [(ngModel)]="selectedMyGame.rate.id" name="rateId">
          <input max="20" min="0" type="number" id="rating" [(ngModel)]="selectedMyGame.rate.rating" name="rating" placeholder="Note du jeux (/20)">

          <ng-container *ngIf="selectedMyGame.rate.content">
            <textarea type="text" id="content_rating" name="content_rating" [(ngModel)]="selectedMyGame.rate.content" placeholder="Expliqué votre note"></textarea>
          </ng-container>
          <ng-container *ngIf="!selectedMyGame.rate.content">
            <textarea type="text" id="content_rating" name="content_rating" ngModel placeholder="Expliqué votre note"></textarea>
          </ng-container>

        </ng-container>
        <ng-container *ngIf="!selectedMyGame.rate">
          <input max="20" min="0" type="number" id="rating" name="rating" ngModel placeholder="Note du jeux (/20)">
          <textarea type="text" id="content_rating" name="content_rating" ngModel placeholder="Expliqué votre note"></textarea>
        </ng-container>

      </div>

      <div class="panel">

        <div class="head-panel">
          <h2><i class="ri-user-star-fill"></i>Avis</h2>
        </div>

        <!-- DIFICULTER -->
        <label>Votre avis sur la Difficulté</label>
        <div class="star-rating">
          <i *ngFor="let star of [1, 2, 3, 4, 5]; let i = index"
             [class.ri-star-line]="star > selectedMyGame.myGame.difficulty_rating"
             [class.ri-star-fill]="star <= selectedMyGame.myGame.difficulty_rating"
             (click)="selectedMyGame.myGame.difficulty_rating = i + 1"></i>
        </div>

        <div style="display: none">
          <label for="difficulty_rating_1">
            <input type="radio" id="difficulty_rating_1" [(ngModel)]="selectedMyGame.myGame.difficulty_rating"
                   name="difficulty_rating" [value]="1">
            1
          </label>
          <label for="difficulty_rating_2">
            <input type="radio" id="difficulty_rating_2" [(ngModel)]="selectedMyGame.myGame.difficulty_rating"
                   name="difficulty_rating" [value]="2">
            2
          </label>
          <label for="difficulty_rating_3">
            <input type="radio" id="difficulty_rating_3" [(ngModel)]="selectedMyGame.myGame.difficulty_rating"
                   name="difficulty_rating" [value]="3">
            3
          </label>
          <label for="difficulty_rating_4">
            <input type="radio" id="difficulty_rating_4" [(ngModel)]="selectedMyGame.myGame.difficulty_rating"
                   name="difficulty_rating" [value]="4">
            4
          </label>
          <label for="difficulty_rating_5">
            <input type="radio" id="difficulty_rating_5" [(ngModel)]="selectedMyGame.myGame.difficulty_rating"
                   name="difficulty_rating" [value]="5">
            5
          </label>
        </div>

        <!-- TEMPS DE JEUX -->
        <label>Votre avis sur le Temps de jeux</label>
        <div class="star-rating">
          <i *ngFor="let star of [1, 2, 3, 4, 5]; let i = index"
             [class.ri-star-line]="star > selectedMyGame.myGame.lifetime_rating"
             [class.ri-star-fill]="star <= selectedMyGame.myGame.lifetime_rating"
             (click)="selectedMyGame.myGame.lifetime_rating = i + 1"></i>
        </div>

        <div style="display: none">
          <label for="lifetime_rating_1">
            <input type="radio" id="lifetime_rating_1" [(ngModel)]="selectedMyGame.myGame.lifetime_rating"
                   name="lifetime_rating" [value]="1">
            1
          </label>
          <label for="lifetime_rating_2">
            <input type="radio" id="lifetime_rating_2" [(ngModel)]="selectedMyGame.myGame.lifetime_rating"
                   name="lifetime_rating" [value]="2">
            2
          </label>
          <label for="lifetime_rating_3">
            <input type="radio" id="lifetime_rating_3" [(ngModel)]="selectedMyGame.myGame.lifetime_rating"
                   name="lifetime_rating" [value]="3">
            3
          </label>
          <label for="lifetime_rating_4">
            <input type="radio" id="lifetime_rating_4" [(ngModel)]="selectedMyGame.myGame.lifetime_rating"
                   name="lifetime_rating" [value]="4">
            4
          </label>
          <label for="lifetime_rating_5">
            <input type="radio" id="lifetime_rating_5" [(ngModel)]="selectedMyGame.myGame.lifetime_rating"
                   name="lifetime_rating" [value]="5">
            5
          </label>
        </div>

      </div>

      <div class="panel">

        <div class="head-panel">
          <h2><i class="ri-price-tag-3-fill"></i>Tags</h2>
          <i class="ri-more-2-fill" data-bs-toggle="modal" data-bs-target="#manageTags"></i>
        </div>

        <ng-container *ngIf="app.tagsUserNoReload.length > 0">
          <div>
              <button type="button" class="inputSelect" data-bs-toggle="dropdown" aria-expanded="false">
                <p id="tags" *ngIf="tagsSelectedUser.length > 0">
                  <ng-container *ngFor="let oneTags of app.tagsUserNoReload">
                    <span [class.displayNone]="!isTagInSelected(oneTags.id)" class="badge" style="background-color: {{oneTags.color}}">
                      <div>
                        {{ oneTags.name }}
                        <i class="ri-close-line" (click)="$event.stopPropagation(); toggleTags(oneTags.id);"></i>
                      </div>
                    </span>
                  </ng-container>
                </p>
                <p *ngIf="tagsSelectedUser.length == 0" class="placeholderInput">Ajoutez un tags</p>
                <i class="ri-arrow-down-s-line"></i>
              </button>
              <ul class="dropdown-menu">
                <li *ngFor="let tag of app.tagsUserNoReload">
                  <a class="dropdown-item" (click)="toggleTags(tag.id)">
                    <i [class.ri-checkbox-blank-line]="!isTagInSelected(tag.id)"
                       [class.ri-checkbox-fill]="isTagInSelected(tag.id)"
                    ></i>
                    {{ tag.name }}
                  </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#manageTags">Créer un tag</a></li>
              </ul>




          </div>
        </ng-container>

      </div>


    </section>

    <section id="tab">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link" [class.active]="tabSelected == 1" (click)="tabActive(1)">Exemplaire</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="tabSelected == 2"  (click)="tabActive(2)">Speedrun</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="tabSelected == 3"  (click)="tabActive(3)">Image</a>
        </li>
        <!--<li class="nav-item">
          <a class="nav-link disabled" aria-disabled="true">Disabled</a>
        </li>-->
      </ul>
    </section>

<!--    <button class="main-gamenium-btn" (click)="debug()" type="button">debug</button>-->
    <!-- speedrun -->
    <section id="editedHmgSpeedrun" class="container" [class.displayNone]="tabSelected !== 2">

      <div class="head-all-exemplaire">
        <h1>Speedrun <small>(Total <span>{{ countSpeedrunView() }}</span>)</small></h1>
        <button class="sub-gamenium-btn" type="button" (click)="addSpeedrun()"><i class="ri-add-large-fill"></i></button>
      </div>

      <!-- UN SPEEDRUN -->


      <ng-container *ngFor="let speedrun of selectedMyGame.speedrun; let i = index">

        <div class="oneExemplaire speedrunCard{{i}}" id="speedrunCard{{i}}">

          <div class="head-one-exemplaire">
            <h3>Speedrun #{{i+1}}</h3>
            <i class="ri-delete-bin-fill" (click)="deleteSpeedrun(i)"></i>
          </div>

          <input type="hidden" [(ngModel)]="speedrun.id" name="speedrun{{i}}">

          <!-- category -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-booklet-fill"></i>Category <small>#{{i+1}}</small></h2>
            </div>
            <input type="text" id="category{{i}}" [(ngModel)]="speedrun.category" name="category{{i}}" placeholder="Category (exemple : any%)">
          </div>

          <!-- chrono -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-timer-fill"></i>Chrono <small>#{{i+1}}</small></h2>
            </div>
            <input type="text" id="chrono{{i}}" [(ngModel)]="speedrun.chrono" name="chrono{{i}}" placeholder="Chrono (exemple : 1H30)">
          </div>

          <!-- LINK -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-links-fill"></i>Lien <small>#{{i+1}}</small></h2>
            </div>
            <input type="text" id="link{{i}}" [(ngModel)]="speedrun.link" name="link{{i}}" placeholder="Lien (exemple : https://speedrun.com/)">
          </div>

        </div>

      </ng-container>
      <ng-container *ngFor="let n of [].constructor(nbSpeedrun); let i = index">

        <div class="oneExemplaire speedrunCard{{i}}" id="speedrunCard{{i+nbSpeedrunExisting}}" style="display: {{ displayDefault(i+ nbSpeedrunExisting) }}">
          <div class="head-one-exemplaire">
            <h3>Speedrun #{{i+1 + nbSpeedrunExisting}}</h3>
            <i class="ri-delete-bin-fill" (click)="deleteSpeedrun(i+nbSpeedrunExisting)"></i>
          </div>

          <input type="hidden" [(ngModel)]="isNew" name="speedrun{{i+nbSpeedrunExisting}}">

          <!-- category -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-booklet-fill"></i>Category <small>#{{i+1+nbSpeedrunExisting}}</small></h2>
            </div>
            <input type="text" id="category{{i+nbSpeedrunExisting}}" ngModel name="category{{i+nbSpeedrunExisting}}" placeholder="Category (exemple : any%)">
          </div>

          <!-- chrono -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-timer-fill"></i>Chrono <small>#{{i+1+nbSpeedrunExisting}}</small></h2>
            </div>
            <input type="text" id="chrono{{i+nbSpeedrunExisting}}" ngModel name="chrono{{i+nbSpeedrunExisting}}" placeholder="Chrono (exemple : 1H30)">
          </div>

          <!-- LINK -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-links-fill"></i>Lien <small>#{{i+1+nbSpeedrunExisting}}</small></h2>
            </div>
            <input type="text" id="link{{i+nbSpeedrunExisting}}" ngModel name="link{{i+nbSpeedrunExisting}}" placeholder="Lien (exemple : https://speedrun.com/)">
          </div>

        </div>


      </ng-container>











    </section>

    <!-- EXEMPLAIRE -->
    <section id="editedHmgCopy" class="container" [class.displayNone]="tabSelected !== 1">

      <div class="head-all-exemplaire">
        <h1>Exemplaire <small>(Total <span>{{ nbCopyView }}{{ noRealCopy() }}</span>)</small></h1>
        <button class="sub-gamenium-btn" type="button" (click)="addCopyGame()"><i class="ri-add-large-fill"></i></button>
<!--        <i class="ri-sticky-note-add-fill" (click)="addCopyGame()"></i>-->
      </div>

      <!-- UN EXEMPLAIRE -->
      <ng-container *ngFor="let copyGame of selectedMyGame.copyGame; let i = index">

        <div class="oneExemplaire copyCard{{i}}" id="copyCard{{i}}">
          <div class="head-one-exemplaire">
            <h3>Exemplaire #{{i+1}}</h3>
            <i class="ri-delete-bin-fill" (click)="deleteCopyGame(i)"></i>
          </div>

          <input type="hidden" [(ngModel)]="copyGame.id" name="copy{{i}}">

          <!-- EDITIONS-->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-id-card-fill"></i>Editions <small>#{{i+1}}</small></h2>
            </div>
            <input type="text" id="edition{{i}}" [(ngModel)]="copyGame.edition" name="edition{{i}}" placeholder="Editions">
          </div>

          <!-- BARCODE -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-barcode-fill"></i>Barcode <small>#{{i+1}}</small></h2>
            </div>
            <input type="text" id="barcode{{i}}" [(ngModel)]="copyGame.barcode" name="barcode{{i}}" placeholder="Barcode">
          </div>

          <!-- CONTENT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-message-2-fill"></i>Description de l'exemplaire <small>#{{i+1}}</small></h2>
            </div>
            <textarea type="text" id="content{{i}}" [(ngModel)]="copyGame.content" name="content{{i}}" placeholder="Description de l'exemplaire"></textarea>
          </div>

          <!-- ETAT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-hand-coin-fill"></i>Etat <small>#{{i+1}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyEtatAll && copyGame.etat">
              <select id="etat{{i}}" [(ngModel)]="copyGame.etat.id" name="etat{{i}}">
                <option [value]="null">Choisir un etat</option>
                <ng-container *ngFor="let etat of hmgCopyEtatAll">
                  <option [value]="etat.id">{{ etat.name }}</option>
                </ng-container>
              </select>
            </ng-container>
            <ng-container *ngIf="hmgCopyEtatAll && !copyGame.etat">
              <select id="etat{{i}}" name="etat{{i}}" ngModel>
                <option value="">Choisir un etat</option>
                <ng-container *ngFor="let etat of hmgCopyEtatAll">
                  <option [value]="etat.id">{{ etat.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>

          <!-- FORMAT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-instance-fill"></i>Format <small>#{{i+1}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyFormatAll && copyGame.format">
              <select id="format{{i}}" [(ngModel)]="copyGame.format.id" name="format{{i}}">
                <option [value]="null">Choisir un format</option>
                <ng-container *ngFor="let format of hmgCopyFormatAll">
                  <option [value]="format.id">{{ format.name }}</option>
                </ng-container>
              </select>
            </ng-container>
            <ng-container *ngIf="hmgCopyFormatAll && !copyGame.format">
              <select id="format{{i}}" name="format{{i}}" ngModel>
                <option value="">Choissir un format</option>
                <ng-container *ngFor="let format of hmgCopyFormatAll">
                  <option [value]="format.id">{{ format.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>

          <!-- REGION -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-earth-fill"></i>Region <small>#{{i+1}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyRegionAll && copyGame.region">
              <select id="region{{i}}" [(ngModel)]="copyGame.region.id" name="region{{i}}">
                <option [value]="null">Choisir une Region</option>
                <ng-container *ngFor="let region of hmgCopyRegionAll">
                  <option [value]="region.id">{{ region.name }}</option>
                </ng-container>
              </select>
            </ng-container>
            <ng-container *ngIf="hmgCopyRegionAll && !copyGame.region">
              <select id="region{{i}}" name="region{{i}}" ngModel>
                <option value="">Choisir une Region</option>
                <ng-container *ngFor="let region of hmgCopyRegionAll">
                  <option [value]="region.id">{{ region.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>
          <br>
          <hr>
          
          <!-- LANGUES -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-earth-fill"></i>Langues <small>#{{i+1}}</small></h2>
            </div>

            <ng-container *ngIf="hmgCopyLanguageAll && hmgCopyLanguageAll.length > 0">
              <div>
                  <button type="button" class="inputSelect" data-bs-toggle="dropdown" aria-expanded="false">
                    <p id="languages" *ngIf="isInLanguageSelected.length > 0">
                      <ng-container *ngFor="let language of hmgCopyLanguageAll">
                        <span [class.displayNone]="!isInLanguageSelected(language.id)" class="badge" style="background-color: {{this.app.colorDefault}}">
                          <div>
                            {{ language.name }}
                            <i class="ri-close-line" (click)="$event.stopPropagation(); toggleLanguages(language.id);"></i>
                          </div>
                        </span>
                      </ng-container>
                    </p>
                    <p *ngIf="hmgCopyLanguageSelected.length == 0" class="placeholderInput cornflex">Ajoutez une langue</p>
                    <i class="ri-arrow-down-s-line"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li *ngFor="let language of hmgCopyLanguageAll">
                      <a class="dropdown-item" (click)="toggleLanguages(language.id)">
                        <i [class.ri-checkbox-blank-line]="!isInLanguageSelected(language.id)"
                           [class.ri-checkbox-fill]="isInLanguageSelected(language.id)"
                        ></i>
                        {{ language.name }}
                      </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                  </ul>
              </div>
            </ng-container>

          </div>

            
          <br>
          <hr>

          <!-- PURCHASE -->
          <div class="panel">

            <div class="head-panel">
              <h2><i class="ri-shopping-cart-2-fill"></i>Achat <small>#{{i+1}}</small></h2>
              <i class="ri-more-2-fill" data-bs-toggle="modal" data-bs-target="#manageBuyWhere"></i>
            </div>
            <ng-container *ngIf="copyGame.purchase">

              <input type="hidden" [(ngModel)]="copyGame.purchase.id" name="purchase{{i}}">

              <div class="head-purchase">

                <!-- PRICE -->
                <input type="number" id="price{{i}}" [(ngModel)]="copyGame.purchase.price" name="purchase_price{{i}}" placeholder="Prix d'achat" min="0.00" max="10000.00" step="0.01">

                <!-- DEVISE -->
                <ng-container *ngIf="deviseAll && copyGame.purchase.devise">
                  <select id="devise{{i}}" [(ngModel)]="copyGame.purchase.devise.id" name="purchase_devise{{i}}">
                    <option [value]="null">Choissir une devise</option>
                    <ng-container *ngFor="let devise of deviseAll">
                      <option [value]="devise.id">{{ devise.symbole }}</option>
                    </ng-container>
                  </select>
                </ng-container>
                <ng-container *ngIf="deviseAll && !copyGame.purchase.devise">
                  <select id="devise{{i}}" name="purchase_devise{{i}}" ngModel>
                    <option value="">Choissir une devise</option>
                    <ng-container *ngFor="let devise of deviseAll">
                      <option [value]="devise.id">{{ devise.symbole }}</option>
                    </ng-container>
                  </select>
                </ng-container>

              </div>

              <!-- BUY WHERE -->
              <ng-container *ngIf="app.buyWhereUserNoReload && copyGame.purchase.buy_where">
                <select id="buy_where{{i}}" [(ngModel)]="copyGame.purchase.buy_where.id" name="purchase_buy_where{{i}}">
                  <option [value]="null">Lieux d'achat</option>
                  <ng-container *ngFor="let buyWhereOne of app.buyWhereUserNoReload">
                    <option [value]="buyWhereOne.id">{{ buyWhereOne.name }}</option>
                  </ng-container>
                </select>
              </ng-container>
              <ng-container *ngIf="app.buyWhereUserNoReload && !copyGame.purchase.buy_where">
                <select id="buy_where{{i}}" name="purchase_buy_where{{i}}" ngModel>
                  <option value="">Lieu d'achat</option>
                  <ng-container *ngFor="let buyWhereOne of app.buyWhereUserNoReload ">
                    <option [value]="buyWhereOne.id">{{ buyWhereOne.name }}</option>
                  </ng-container>
                </select>
              </ng-container>

              <!-- BUY DATE -->
              <div class="head-buy">

                <select id="day_buy_date{{i}}" [(ngModel)]="copyGame.purchase.day_buy_at"
                        name="purchase_day_buy_date{{i}}">
                  <option [value]="null">Jour d'achat</option>
                  <ng-container *ngFor="let day of [].constructor(31); let d = index">
                    <option [value]="d+1">{{ d + 1 }}</option>
                  </ng-container>
                </select>

                <select id="month_buy_date{{i}}" [(ngModel)]="copyGame.purchase.month_buy_at"
                        name="purchase_month_buy_date{{i}}">
                  <option [value]="null">Mois d'achat</option>
                  <ng-container *ngFor="let month of [].constructor(12); let m = index">
                    <option [value]="m+1">{{ m + 1 }}</option>
                  </ng-container>
                </select>

                <select id="year_buy_date{{i}}" [(ngModel)]="copyGame.purchase.year_buy_at"
                        name="purchase_year_buy_date{{i}}">
                  <option [value]="null">Année d'achat</option>
                  <ng-container *ngFor="let year of this.app.getYears(); let y = index">
                    <option [value]="year">{{ year }}</option>
                  </ng-container>
                </select>

              </div>


              <!-- PURCHASE CONTENT -->
              <textarea type="text" id="purchase_content{{i}}" [(ngModel)]="copyGame.purchase.content" name="purchase_content{{i}}" placeholder="Plus d'inforamtions sur l'achat"></textarea>

            </ng-container>
            <ng-container *ngIf="!copyGame.purchase">

              <!-- PRICE -->
              <label for="price{{i}}">Price:</label>
              <input type="number" id="price{{i}}" name="purchase_price{{i}}" ngModel>

              <!-- DEVISE -->
              <label for="devise{{i}}">Devise:</label>
              <ng-container *ngIf="deviseAll">
                <select id="devise{{i}}" name="purchase_devise{{i}}" ngModel>
                  <option [value]="null">Choissir une devise</option>
                  <ng-container *ngFor="let devise of deviseAll">
                    <option [value]="devise.id">{{ devise.symbole }}</option>
                  </ng-container>
                </select>
              </ng-container>

              <!-- BUY DATE -->
              <label for="buy_date{{i}}">Buy date:</label>
              <input type="date" id="buy_date{{i}}" name="purchase_buy_date{{i}}" ngModel>

              <!-- BUY WHERE -->
              <label for="buy_where{{i}}">Buy where:</label>
              <ng-container *ngIf="app.buyWhereUserNoReload ">
                <select id="buy_where{{i}}" name="purchase_buy_where{{i}}" ngModel>
                  <option [value]="null">Choissir une Buy Where</option>
                  <ng-container *ngFor="let buyWhereOne of app.buyWhereUserNoReload ">
                    <option [value]="buyWhereOne.id">{{ buyWhereOne.name }}</option>
                  </ng-container>
                </select>
              </ng-container>

              <!-- PURCHASE CONTENT -->
              <label for="purchase_content{{i}}">Purchase content:</label>
              <input type="text" id="purchase_content{{i}}" name="purchase_content{{i}}" ngModel>

            </ng-container>
          </div>
        </div>
      </ng-container>
      <ng-container *ngFor="let n of [].constructor(nbCopy); let i = index">

        <div class="oneExemplaire copyCard{{i}}" id="copyCard{{i+nbCopyExisting}}" style="display: {{ displayDefault(i+nbCopyExisting) }}">
          <div class="head-one-exemplaire">
            <h3>Exemplaire #{{i + 1 + nbCopyExisting}}</h3>
            <i class="ri-delete-bin-fill" (click)="deleteCopyGame(i+nbCopyExisting)"></i>
          </div>

          <input type="hidden" [(ngModel)]="isNew" name="copy{{i+nbCopyExisting}}">

          <!-- RESTE DU CODE -->
          <!-- EDITIONS-->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-id-card-fill"></i>Editions <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <input type="text" id="edition{{i+nbCopyExisting}}" name="edition{{i+nbCopyExisting}}" ngModel placeholder="Editions">
          </div>


          <!-- BARCODE -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-barcode-fill"></i>Barcode <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <input type="text" id="barcode{{i+nbCopyExisting}}" name="barcode{{i+nbCopyExisting}}" ngModel placeholder="Barcode">
          </div>

          <!-- CONTENT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-message-2-fill"></i>Description de l'exemplaire <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <textarea type="text" id="content{{i+nbCopyExisting}}" name="content{{i+nbCopyExisting}}" ngModel placeholder="Description de l'exemplaire"></textarea>
          </div>

          <!-- ETAT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-hand-coin-fill"></i>Etat <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyEtatAll">
              <select id="etat{{i+nbCopyExisting}}" name="etat{{i+nbCopyExisting}}" ngModel>
                <option value="">Choissir un etat</option>
                <ng-container *ngFor="let etat of hmgCopyEtatAll">
                  <option [value]="etat.id">{{ etat.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>

          <!-- FORMAT -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-instance-fill"></i>Format <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyFormatAll">
              <select id="format{{i+nbCopyExisting}}" name="format{{i+nbCopyExisting}}" ngModel>
                <option value="">Choissir un format</option>
                <ng-container *ngFor="let format of hmgCopyFormatAll">
                  <option [value]="format.id">{{ format.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>

          <!-- REGION -->
          <div class="panel">
            <div class="head-panel">
              <h2><i class="ri-earth-fill"></i>Region <small>#{{i+1+nbCopyExisting}}</small></h2>
            </div>
            <ng-container *ngIf="hmgCopyRegionAll">
              <select id="region{{i+nbCopyExisting}}" name="region{{i+nbCopyExisting}}" ngModel>
                <option value="">Choissir une Region</option>
                <ng-container *ngFor="let region of hmgCopyRegionAll">
                  <option [value]="region.id">{{ region.name }}</option>
                </ng-container>
              </select>
            </ng-container>
          </div>

          <br>
          <hr>

          <div class="panel">

            <div class="head-panel">
              <h2><i class="ri-shopping-cart-2-fill"></i>Achat <small>#{{i+1+nbCopyExisting}}</small></h2>
              <i class="ri-more-2-fill" data-bs-toggle="modal" data-bs-target="#manageBuyWhere"></i>
            </div>

            <input type="hidden" name="purchase{{i+nbCopyExisting}}" ngModel>


            <div class="head-purchase">

              <!-- PRICE -->
              <input type="number" id="price{{i+nbCopyExisting}}" ngModel name="purchase_price{{i+nbCopyExisting}}" placeholder="Prix d'achat" min="0.00" max="10000.00" step="0.01">

              <!-- DEVISE -->
              <ng-container *ngIf="deviseAll">
                <select id="devise{{i+nbCopyExisting}}" name="purchase_devise{{i+nbCopyExisting}}" ngModel>
                  <option value="">Choissir une devise</option>
                  <ng-container *ngFor="let devise of deviseAll">
                    <option [value]="devise.id">{{ devise.symbole }}</option>
                  </ng-container>
                </select>
              </ng-container>

            </div>


            <!-- BUY WHERE -->
            <ng-container *ngIf="app.buyWhereUserNoReload ">
              <select id="buy_where{{i+nbCopyExisting}}" name="purchase_buy_where{{i+nbCopyExisting}}" ngModel>
                <option value="">Lieu d'achat</option>
                <ng-container *ngFor="let buyWhereOne of app.buyWhereUserNoReload ">
                  <option [value]="buyWhereOne.id">{{ buyWhereOne.name }}</option>
                </ng-container>
              </select>
            </ng-container>


            <!-- BUY DATE -->

            <div class="head-buy">

              <select id="day_buy_date{{i+nbCopyExisting}}" ngModel name="purchase_day_buy_date{{i+nbCopyExisting}}">
                <option value="">Jour d'achat</option>
                <ng-container *ngFor="let day of [].constructor(31); let d = index">
                  <option [value]="d+1">{{ d + 1 }}</option>
                </ng-container>
              </select>

              <select id="month_buy_date{{i+nbCopyExisting}}" ngModel name="purchase_month_buy_date{{i+nbCopyExisting}}">
                <option value="">Mois d'achat</option>
                <ng-container *ngFor="let month of [].constructor(12); let m = index">
                  <option [value]="m+1">{{ m + 1 }}</option>
                </ng-container>
              </select>

              <select id="year_buy_date{{i+nbCopyExisting}}" ngModel name="purchase_year_buy_date{{i+nbCopyExisting}}">
                <option value="">Année d'achat</option>
                <ng-container *ngFor="let year of this.app.getYears(); let y = index">
                  <option [value]="year">{{ year }}</option>
                </ng-container>
              </select>


            </div>


            <!-- PURCHASE CONTENT -->
            <textarea type="text" id="purchase_content{{i+nbCopyExisting}}" ngModel
                   name="purchase_content{{i+nbCopyExisting}}" placeholder="Plus d'inforamtions sur l'achat"></textarea>

          </div>
        </div>
      </ng-container>
    </section>
  </div>
  </ng-container>

  <div class="end-action container">
    <button class="main-gamenium-btn" type="submit">Sauvegardé <i class="ri-save-3-fill"></i></button>
    <button class="sub-gamenium-btn delete-btn" (click)="this.app.deleteMyGame(selectedMyGame)">Supprimer le jeux de votre collection <i class="ri-delete-bin-line"></i></button>
  </div>
</form>

</section>


