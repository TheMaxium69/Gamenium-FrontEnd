<div id="show-game" class="d-flex container">
    <ng-container *ngFor="let myGameHistorique of myGameHistoriqueAll">
      <div *ngIf="myGameHistorique.myGame.is_pinned" class="d-flex justify-content-center" style="width: 100%;">
        <div class="card-game container d-flex" (click)="selectViewMyGame(myGameHistorique); $event.stopPropagation()" data-bs-toggle="modal" data-bs-target="#viewGame">

          <div *ngIf="myGameHistorique.myGame.is_pinned" class="isPinned" style="background-color: {{profilSelected?.themeColor ?? 'red'}};">

            <p><i class="ri-pushpin-fill"></i></p>

            <style>
              .isPinned{
                position: absolute;
                width: 30px;
                height: 30px;
                z-index: 1029;
                border-radius: 100%;
                margin-left: -10px;
                margin-top: -10px;
              }
              .isPinned p{
                text-align: center;
                margin: 1px;
                margin-left: 2px;
                color: white;
              }
            </style>

          </div>

          <div class="card-left">
            <ng-container *ngIf="myGameHistorique.myGame.game.image.icon_url == 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('https://tyrolium.fr/Contenu/Image/Soon.png')"></div>
              <div class="blur"></div>
              <img src="https://tyrolium.fr/Contenu/Image/Soon.png" alt="...">
            </ng-container>
            <ng-container *ngIf="myGameHistorique.myGame.game.image.icon_url != 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('{{ myGameHistorique.myGame.game.image?.thumb_url }}')"></div>
              <div class="blur"></div>
              <img src="{{ myGameHistorique.myGame.game.image?.thumb_url }}" alt="...">
            </ng-container>
          </div>
          <div class="card-right d-flex">
            <div class="core-left">
              <h5>{{ myGameHistorique.myGame.game.name }}</h5>
              <p style="color: red"> Editeur Sample </p>
<!--              <ng-container *ngIf="myGameHistorique.buy_at">-->
<!--                <p> [QUAND] Acheter le : {{ myGameHistorique.buy_at }}</p>-->
<!--              </ng-container>-->
<!--              <ng-container *ngIf="myGameHistorique.buywhere ">-->
<!--                <p> [LIEUX] Ou : {{ myGameHistorique.buywhere.name }}</p>-->
<!--              </ng-container>-->
              <p> Ajouter le : {{ myGameHistorique.myGame.added_at }}</p>
            </div>
            <div class="core-right">
              <div class="card-note" style="background-color: {{ profilSelected?.themeColor }}">
                <p><span>
              <ng-container *ngIf="!userRatingAll">NA</ng-container>

              <ng-container *ngIf="userRatingAll">

                <ng-container *ngIf="hasUserRatings(myGameHistorique.myGame.game.id)">

                  <ng-container *ngFor="let userRating of userRatingAll">
                    <ng-container *ngIf="userRating.game.id == myGameHistorique.myGame.game.id">{{ userRating.rating }}</ng-container>
                  </ng-container>

                </ng-container>

                <ng-container *ngIf="!hasUserRatings(myGameHistorique.myGame.game.id)">Na</ng-container>

              </ng-container>


                </span>/20</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngFor="let myGameHistorique of myGameHistoriqueAll">
      <div *ngIf="!myGameHistorique.myGame.is_pinned" class="d-flex justify-content-center" style="width: 100%;">
        <div class="card-game container d-flex" (click)="selectViewMyGame(myGameHistorique); $event.stopPropagation()" data-bs-toggle="modal" data-bs-target="#viewGame">
          <div class="card-left">
            <ng-container *ngIf="myGameHistorique.myGame.game.image.icon_url == 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('https://tyrolium.fr/Contenu/Image/Soon.png')"></div>
              <div class="blur"></div>
              <img src="https://tyrolium.fr/Contenu/Image/Soon.png" alt="...">
            </ng-container>
            <ng-container *ngIf="myGameHistorique.myGame.game.image.icon_url != 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('{{ myGameHistorique.myGame.game.image?.thumb_url }}')"></div>
              <div class="blur"></div>
              <img src="{{ myGameHistorique.myGame.game.image?.thumb_url }}" alt="...">
            </ng-container>
          </div>
          <div class="card-right d-flex">
            <div class="core-left">
              <h5>{{ myGameHistorique.myGame.game.name }}</h5>
              <p style="color: red"> Editeur Sample </p>
<!--              <ng-container *ngIf="myGameHistorique.buy_at">-->
<!--                <p> [QUAND] Acheter le : {{ myGameHistorique.buy_at }}</p>-->
<!--              </ng-container>-->
<!--              <ng-container *ngIf="myGameHistorique.buywhere ">-->
<!--                <p> [LIEUX] Ou : {{ myGameHistorique.buywhere.name }}</p>-->
<!--              </ng-container>-->
              <p> Ajouter le : {{ myGameHistorique.myGame.added_at }}</p>
            </div>
            <div class="core-right">
              <div class="card-note" style="background-color: {{ profilSelected?.themeColor }}">
                <p><span>
              <ng-container *ngIf="!userRatingAll">NA</ng-container>

              <ng-container *ngIf="userRatingAll">

                <ng-container *ngIf="hasUserRatings(myGameHistorique.myGame.game.id)">

                  <ng-container *ngFor="let userRating of userRatingAll">
                    <ng-container *ngIf="userRating.game.id == myGameHistorique.myGame.game.id">{{ userRating.rating }}</ng-container>
                  </ng-container>

                </ng-container>

                <ng-container *ngIf="!hasUserRatings(myGameHistorique.myGame.game.id)">Na</ng-container>

              </ng-container>


                </span>/20</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
</div>

<!-- MODALE VIEW GAME -->
<div class="modal fade text-center" id="viewGame" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button (click)="unselectViewMyGame()" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <app-view-mygame></app-view-mygame>


    </div>
  </div>
</div>
