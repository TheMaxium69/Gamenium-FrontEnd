<form class="search" [ngStyle]="{ '--userColor': userColor }">
  <input
    #input
    (keyup)="updateValue(input.value)"
    class="searchTerm"
    name="searchValue"
    [(ngModel)]="searchValue"
    placeholder="Enter your search term ..."
    [style.borderColor]="userColor"
  />
  <input class="searchButton" type="submit" />
</form>


<div id="bar-type">
  <ul class="d-flex">
    <!--  GAME  -->
    <ng-container *ngIf="searchType == 'game'">
      <li class="active" style="background: {{userColor}}; color: white;" (click)="changeType('game')">Jeux</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'game'">
      <li (click)="changeType('game')">Jeux</li>
    </ng-container>

    <!--  USER  -->
    <ng-container *ngIf="searchType == 'user'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('user')">Profile</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'user'">
      <li (click)="changeType('user')">Profile</li>
    </ng-container>

    <!--  postactu  -->
    <ng-container *ngIf="searchType == 'postactu'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('postactu')">Actualité</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'postactu'">
      <li (click)="changeType('postactu')">Actualité</li>
    </ng-container>

    <!--  provider  -->
    <ng-container *ngIf="searchType == 'provider'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('provider')">Provider</li> <!-- A CHANGER !! -->
    </ng-container>
    <ng-container *ngIf="searchType !== 'provider'">
      <li (click)="changeType('provider')">Provider</li> <!-- A CHANGER !! -->
    </ng-container>

  </ul>
</div>


<ng-container *ngIf="searchType == 'game'">

  <div id="show-game" class="d-flex container">
    <ng-container *ngFor="let game of games">
      <div class="card-wrapper">
        <div class="card-game container d-flex" routerLink="/game/{{ game.id }}">
          <div class="card-left">
            <ng-container
              *ngIf="game.image.icon_url == 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('https://tyrolium.fr/Contenu/Image/Soon.png')"></div>
              <div class="blur"></div>
              <img src="https://tyrolium.fr/Contenu/Image/Soon.png" alt="...">
            </ng-container>
            <ng-container
              *ngIf="game.image.icon_url != 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('{{ game.image?.thumb_url }}')"></div>
              <div class="blur"></div>
              <img src="{{ game.image?.thumb_url }}" alt="...">
            </ng-container>
          </div>
          <div class="card-right d-flex">
            <div class="core-left">
              <h2>{{ game.name }}</h2>
            <p style="color: {{ userColor ? userColor : 'red' }}" class="platform-names">
              <ng-container *ngFor="let platform of game.platforms; let last = last">
                {{ this.app.plateformeNameFormatage(platform.name) }}<span *ngIf="!last">, </span>
              </ng-container>
            </p>
              <p> Date de sortie : {{ game.expectedReleaseDay + game.expectedReleaseMonth + game.expectedReleaseYear }}
              </p>
            </div>
            <div class="core-right">
              <div class="card-note" style="background-color: {{userColor}};">
                <p><span>{{rateAverage(fakeRates)}}</span>/20</p>
              </div>
            </div>
          </div>
        </div>
    </div>
    </ng-container>
    <button id="moreGameBTN" class="btn btn-primary" (click)="moreGame()" style="display: none">Voir plus</button>
  </div>

</ng-container>

<ng-container *ngIf="searchType == 'user'">

  <div  id="show-user" class="container d-flex justify-content-center">

    <ng-container *ngFor="let user of users">

      <div routerLink="/profil/{{ user.id }}">
        <div id="card-user" style="background: linear-gradient(180deg, {{user.color ?? 'red'}} 35%, white 35%)">
          <div class="circleImage" style="{{ this.app.generatePPUseritium(this.user?.pp?.url, this.user?.displayname || this.user.username, this.user?.color ) }}"></div>
          <h2 class="card-title mt-4">{{ user.displayname || user.username }}</h2>
          <small *ngIf="user.displayname !== user.username"><img width="20px" src="https://tyrolium.fr/Contenu/Image/Useritium Site.png">{{ user.username }}</small><br>
        </div>

      </div>

    </ng-container>

  </div>


</ng-container>


<ng-container *ngIf="searchType == 'postactu'">
    <section id="actu-all">

    <div class="d-flex justify-content-center gap-5">
      <app-card-actuality></app-card-actuality>
    </div>

  </section>
</ng-container>

<ng-container *ngIf="searchType == 'provider'">
  <div  id="show-provider" class="container d-flex justify-content-center">

    <ng-container *ngFor="let provider of providers">
      <div routerLink="/provider/{{ provider.id }}">
        <!-- <ng-container *ngIf="user.pp.url">
              <div class="image" style="background-image: url('https://tyrolium.fr/Contenu/Image/Soon.png')"></div>
              <div class="blur"></div>
              <img src="https://tyrolium.fr/Contenu/Image/Soon.png" alt="...">
        </ng-container>
            <ng-container
              *ngIf="game.image.icon_url != 'https://www.giantbomb.com/a/uploads/square_avatar/11/110673/3026329-gb_default-16_9.jpg'">
              <div class="image" style="background-image: url('{{ game.image?.thumb_url }}')"></div>
              <div class="blur"></div>
              <img src="{{ game.image?.thumb_url }}" alt="...">
            </ng-container> -->
        <div id="card-provider" style="background: linear-gradient(180deg, {{provider.color ?? 'red'}} 35%, white 35%)">
          <div class="circleImage" style="background-image: url('{{ provider.picture?.url }}');"></div>
          <h2 class="card-title">{{ provider.displayName }}</h2><br>
          <p>{{ provider.content }}</p><br>
        </div>

      </div>

    </ng-container>
  </div>
</ng-container>
