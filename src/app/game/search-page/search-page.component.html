<div style="height: 113px;width: 100%"></div>
<form class="search fixed-top" [ngStyle]="{ '--userColor': userColor ?? this.app.colorDefault }">
  <input
    #input
    (keyup)="updateValue(input.value)"
    class="searchTerm"
    name="searchValue"
    [(ngModel)]="searchValue"
    placeholder="Tapez votre recherche ..."
    [style.borderColor]="userColor"
  />
  <input class="searchButton" type="submit" />
</form>


<div id="bar-type">
  <ul class="d-flex">
    <!--  GAME  -->
    <ng-container *ngIf="searchType == 'game'">
      <li class="active" style="background: {{userColor}}; color: white;" (click)="changeType('game')">Jeux</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'game'">
      <li (click)="changeType('game')">Jeux</li>
    </ng-container>

    <!--  USER  -->
    <ng-container *ngIf="searchType == 'user'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('user')">Profile</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'user'">
      <li (click)="changeType('user')">Profile</li>
    </ng-container>

    <!--  postactu  -->
    <ng-container *ngIf="searchType == 'postactu'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('postactu')">Actualité</li>
    </ng-container>
    <ng-container *ngIf="searchType !== 'postactu'">
      <li (click)="changeType('postactu')">Actualité</li>
    </ng-container>

    <!--  provider  -->
    <ng-container *ngIf="searchType == 'provider'">
      <li class="active" style="background: {{userColor}}; color: white;"  (click)="changeType('provider')">Provider</li> <!-- A CHANGER !! -->
    </ng-container>
    <ng-container *ngIf="searchType !== 'provider'">
      <li (click)="changeType('provider')">Provider</li> <!-- A CHANGER !! -->
    </ng-container>

  </ul>
</div>


<ng-container *ngIf="searchType == 'game'">

  <div id="show-game" class="d-flex container">
    <app-card-game *ngFor="let game of games" [game]="game" style="width: 100%"></app-card-game>
    <button id="moreGameBTN" class="container main-gamenium-btn" (click)="moreGame()" style="display: none; background-color: {{ userColor }}">Voir plus</button>
  </div>

</ng-container>

<ng-container *ngIf="searchType == 'user'">
  <div id="show-user" class="container d-flex justify-content-center flex-wrap">
    <ng-container *ngFor="let user of users">
      <div
        routerLink="/profil/{{ user.id }}"
        *ngIf="user.id != this.app.userConnected.id"
        class="user-card-wrapper m-3"
      >
        <div
          id="card-user"
          class="card-user p-3"
          [style.background]=" 'linear-gradient(180deg, ' + (user.color ?? 'red') + ' 35%, white 35%)' "
        >
        <div class="circleImage" style="{{ this.app.generatePPUseritium(user?.pp?.url, user?.displayname_useritium || user.username, user?.color ) }}"></div>
          <h2 class="card-title mt-4">{{ user.displayname_useritium || user.username }}</h2>
          <small *ngIf="user.displayname_useritium && user.displayname_useritium !== user.username" class="mt-1">
            <img
              width="20px"
              src="https://tyrolium.fr/Contenu/Image/Useritium Site.png"
              alt="Useritium Logo"
            />
            {{ user.username }}
          </small>


          <div *ngIf="user.badges && user.badges.length > 0" class="mt-1">
            <div class="d-flex flex-row flex-wrap align-items-center">
              <div
                *ngFor="let badge of user.badges"
                [ngClass]="{'pe-1': user.badges.length > 1}"
                class="badge-item"
              >
                <img
                  [src]="badge.picture?.url || 'assets/default-badge.png'"
                  alt="{{ badge.name }}"
                  class="badge-image"
                  [title]="badge.name || 'No description available'"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</ng-container>





<ng-container *ngIf="searchType == 'postactu'">
  <section id="actu-all">

    <div class="d-flex justify-content-center gap-5">
      <app-view-actuality></app-view-actuality>
    </div>

  </section>
</ng-container>

<ng-container *ngIf="searchType === 'provider'">
  <div id="show-provider" class="container d-flex justify-content-center">
    <ng-container *ngFor="let provider of providers">
      <app-card-provider
        [provider]="provider"
        [isDetailView]="false"
        (followed)="handleFollowed($event)"
        (unfollowed)="handleUnfollowed($event)"></app-card-provider>
    </ng-container>
  </div>
</ng-container>


